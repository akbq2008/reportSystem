$.fn.drag=function(options){var x,drag=this,isMove=false,defaults={};var options=$.extend(defaults,options);var handler=drag.find(".handler");var drag_bg=drag.find(".drag_bg");var text=drag.find(".drag_text");var maxWidth=drag.width()-handler.width();handler.mousedown(function(e){isMove=true;x=e.pageX-parseInt(handler.css("left"),10)});$(document).mousemove(function(e){var _x=e.pageX-x;if(isMove){if(_x>0&&_x<=maxWidth){handler.css({"left":_x});drag_bg.css({"width":_x})}else{if(_x>maxWidth){dragOk()}}}}).mouseup(function(e){isMove=false;var _x=e.pageX-x;if(_x<maxWidth){handler.css({"left":0});drag_bg.css({"width":0})}});function dragOk(){handler.removeClass("handler_bg").addClass("handler_ok_bg");$(".drag_text").attr("data-status","true");text.removeClass("slidetounlock").text("验证通过").css({"color":"#fff"});handler.css({"left":maxWidth});drag_bg.css({"width":maxWidth});handler.unbind("mousedown");$(document).unbind("mousemove");$(document).unbind("mouseup")}function reset(){handler.css({"left":0});drag_bg.css({"width":0})}};
$(function(){$("#drag").drag();var base=new Base();base.browserVersion();var forget=base.getDom("forget"),register=base.getDom("register"),login_btn=base.getDom("login_btn"),errorInfo=$("#errorInfo"),flag=0;if(register!=null){register.onclick=function(){location.href="register.html"}}var fn=function(event){var event=base.getEvent(event),userNameVal=$("#userName").val(),secreateVal=$("#secreate").val();base.preventDefault(event);if(!userNameVal){errorInfo.css("display","block");errorInfo.text("请输入用户名！");return}else{if(!secreateVal){errorInfo.css("display","block");errorInfo.text("请输入密码！");return}else{var userNamehash=hex_md5(userNameVal),secreatehash=hex_md5(secreateVal);var data_status=$(".drag_text").attr("data-status");flag++;if(flag==3){$(".toggle_yzm").css("display","block")}$.ajaxSetup({cache:false});if(flag<3||data_status=="true"){$.ajax({type:"get",url:"HandleLogin",async:true,data:{userNamehash:userNamehash},success:function(data){data=JSON.parse(data);if(secreatehash==data.secreate){errorInfo.css("display","none");errorInfo.text("");$(".toggle_yzm").css("display","none");$.cookie("token",7897235480609436*Math.random());location.href="index.html"}else{$(".login_box input").val("");errorInfo.css("display","block");errorInfo.text("用户名或者密码不正确！");$("#drag").drag();$(".drag_text").attr("data-status","false");$(".handler").css({"left":0});$(".drag_bg").css({"width":0});$(".drag_text").text("请按住滑块，拖动到最右边").addClass("slidetounlock");var handler=document.querySelector(".handler");handler.className="handler handler_bg"}},error:function(){alert("error!")}})}else{if(flag>3&&data_status=="false"){errorInfo.css("display","block");errorInfo.text("请完成验证码校验！")}}}}};base.addHandler(login_btn,"click",function(){fn()});var modify=base.getDom("modify"),back=base.getDom("back"),errorInfo_second=$("#errorInfo_second"),newUserName=$("#newUserName"),newSecreate=$("#newSecreate"),againSecreate=$("#againSecreate"),tel_yzm=$("#tel_yzm"),telephone=$("#telephone"),Num="";var a=120;var timeId="";
$(".btn_yzm").on("click",function(){var telephoneVal=$("#telephone").val();Num="";for(var i=0;i<6;i++){Num+=Math.floor(Math.random()*10)}if(telephoneVal!=""){$.ajax({type:"POST",url:"http://dingxin.market.alicloudapi.com/dx/sendSms",dataType:"json",async:true,headers:{"Authorization":"APPCODE c50527fb3dc54bf5a69edaf220701b80"},data:{mobile:telephoneVal,param:"code:"+Num,tpl_id:"TP1805151"},success:function(data){},error:function(){console.log("error")}});clearTimeout(timeId);function fn(){if(a>0){$(".btn_yzm").text(a);a--;clearTimeout(timeId);timeId=setTimeout(fn,1000);$(".btn_yzm").attr("disabled","disabled")}else{a=120;$(".btn_yzm").text("获取验证码");$(".btn_yzm").removeAttr("disabled")}}timeId=setTimeout(fn,0)}else{errorInfo_second.css("display","block");errorInfo_second.text("请输入手机号码！")}});base.addHandler(modify,"click",function(){var newUserNameVal=newUserName.val(),newSecreateVal=newSecreate.val(),againSecreateVal=againSecreate.val(),telephoneVal=telephone.val(),tel_yzmVal=tel_yzm.val();if(!newUserNameVal){errorInfo_second.css("display","block");errorInfo_second.text("请输入用户名！");return}else{if(!newSecreateVal){errorInfo_second.css("display","block");errorInfo_second.text("请输入新的密码！");return}else{if(!againSecreateVal){errorInfo_second.css("display","block");errorInfo_second.text("请再次确认密码！");return}else{if(!telephoneVal){errorInfo_second.css("display","block");errorInfo_second.text("请输入手机号码！");return}else{if(!tel_yzmVal){errorInfo_second.css("display","block");errorInfo_second.text("请输入验证码！");return}else{if(newSecreateVal==againSecreateVal){var regex=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;if(!regex.test(telephoneVal)){errorInfo_second.css("display","block");errorInfo_second.text("请输入正确的手机号码！")}else{if(Num==tel_yzmVal){var newUserNamehash=hex_md5(newUserNameVal),newSecreatehash=hex_md5(newSecreateVal),againSecreatehash=hex_md5(againSecreateVal);$.ajaxSetup({cache:false});$.ajax({type:"get",url:"HandleLogin",async:true,data:{userNamehash:newUserNamehash},success:function(data){data=JSON.parse(data)
},error:function(){alert("error!")}}).done(function(data){data=JSON.parse(data);if(data.mes=="10001"){if(data.telephone==telephoneVal){errorInfo_second.css("display","none");errorInfo_second.text("");$.ajaxSetup({cache:false});$.ajax({type:"post",url:"HandleUpdate",async:true,data:{newSecreate:newSecreatehash,userNamehash:newUserNamehash},success:function(msg){msg=JSON.parse(msg);if(msg.mes=="10001"){alert("密码重置成功！");location.href="login.html"}},error:function(){alert("error!")}})}else{errorInfo_second.css("display","block");errorInfo_second.text("请输入注册时所使用的手机号码！")}}else{errorInfo_second.css("display","block");errorInfo_second.text("该用户名不存在！")}})}else{errorInfo_second.css("display","block");errorInfo_second.text("请输入正确的验证码！")}}}else{errorInfo_second.css("display","block");errorInfo_second.text("两次输入的密码不一致！")}}}}}}});base.addHandler(back,"click",function(event){var event=base.getEvent(event);base.preventDefault(event);base.stopPropagation(event);location.href="login.html"})});
var hexcase=0;var b64pad="";var chrsz=8;function hex_md5(s){return binl2hex(core_md5(str2binl(s),s.length*chrsz))}function b64_md5(s){return binl2b64(core_md5(str2binl(s),s.length*chrsz))}function str_md5(s){return binl2str(core_md5(str2binl(s),s.length*chrsz))}function hex_hmac_md5(key,data){return binl2hex(core_hmac_md5(key,data))}function b64_hmac_md5(key,data){return binl2b64(core_hmac_md5(key,data))}function str_hmac_md5(key,data){return binl2str(core_hmac_md5(key,data))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function core_md5(x,len){x[len>>5]|=128<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);
a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn((b&c)|((~b)&d),a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn((b&d)|(c&(~d)),a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|(~d)),a,b,x,s,t)}function core_hmac_md5(key,data){var bkey=str2binl(key);if(bkey.length>16){bkey=core_md5(bkey,key.length*chrsz)}var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}var hash=core_md5(ipad.concat(str2binl(data)),512+data.length*chrsz);
return core_md5(opad.concat(hash),512+128)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&65535)}function bit_rol(num,cnt){return(num<<cnt)|(num>>>(32-cnt))}function str2binl(str){var bin=Array();var mask=(1<<chrsz)-1;for(var i=0;i<str.length*chrsz;i+=chrsz){bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<(i%32)}return bin}function binl2str(bin){var str="";var mask=(1<<chrsz)-1;for(var i=0;i<bin.length*32;i+=chrsz){str+=String.fromCharCode((bin[i>>5]>>>(i%32))&mask)}return str}function binl2hex(binarray){var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt((binarray[i>>2]>>((i%4)*8+4))&15)+hex_tab.charAt((binarray[i>>2]>>((i%4)*8))&15)}return str}function binl2b64(binarray){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";for(var i=0;i<binarray.length*4;i+=3){var triplet=(((binarray[i>>2]>>8*(i%4))&255)<<16)|(((binarray[i+1>>2]>>8*((i+1)%4))&255)<<8)|((binarray[i+2>>2]>>8*((i+2)%4))&255);for(var j=0;j<4;j++){if(i*8+j*6>binarray.length*32){str+=b64pad}else{str+=tab.charAt((triplet>>6*(3-j))&63)}}}return str};
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{if(typeof exports==="object"){factory(require("jquery"))}else{factory(jQuery)}}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{s=decodeURIComponent(s.replace(pluses," "));return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*86400000)}return(document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}var result=key?undefined:{};var cookies=document.cookie?document.cookie.split("; "):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie}}return result};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false}$.cookie(key,"",$.extend({},options,{expires:-1}));return !$.cookie(key)}}));
/*!
 * Base.js v1.0
 * Site:http://www.suanliutudousi.com
 * Author:wyc
 * Email:673161921@qq.com
 * Date: 2017-01-14
 * 
 */
!(function(window,document){function Base(){}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}Base.prototype={getDom:function(id){return document.getElementById(id)},getClass:function(id,clsName){var dom=Base.prototype.getDom(id),ele=dom?dom:document;if(ele.querySelectorAll){return ele.querySelectorAll("."+clsName)}else{var nodes=ele.getElementsByTagName("*"),arr=[];for(var i=0,len=nodes.length;i<len;i++){if(nodes[i].nodeType==1){cls=nodes[i].className.split(" ");if(cls.length>1){for(var j=0,clsL=cls.length;j<clsL;j++){if(cls[j]==clsName){arr.push(nodes[j])}}}else{if(cls.length==1&&cls[0]==clsName){arr.push(nodes[i])}else{arr.push("\u5f53\u524d\u6ca1\u6709\u5339\u914d\u7684\u7c7b\u540d")}}}}return arr}},addHandler:function(ele,type,fn){if(ele!=null){if(ele.addEventListener){ele.addEventListener(type,fn,false)}else{if(ele.attachEvent){ele.attachEvent("on"+type,fn)}else{ele["on"+type]=fn}}}},removeHandler:function(ele,type,fn){if(ele!=null){if(ele.removeEventListener){ele.removeEventListener(type,fn,false)}else{if(ele.detachEvent){ele.detachEvent("on"+type,fn)}else{ele["on"+type]=null}}}},getEvent:function(event){return event?event:window.event},getType:function(event){return event.type},getTarget:function(event){return event.target||event.srcElement},preventDefault:function(event){var event=Base.prototype.getEvent(event);if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}},stopPropagation:function(event){var event=Base.prototype.getEvent(event);if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}},getOffsetLeft:function(ele){if(ele!=null){var actualLeft=ele.offsetLeft;var current=ele.offsetParent;while(current!==null){actualLeft+=current.offsetLeft;current=current.offsetParent}}return actualLeft},getOffsetTop:function(ele){if(ele!=null){var actualTop=ele.offsetTop;
var current=ele.offsetParent;while(current!==null){actualTop+=current.offsetTop;current=current.offsetParent}}return actualTop},delegateEvent:function(target,event,fn){addEvent(document,event,function(e){if(e.target.nodeName==target.toUpperCase()){fn.call(e.target)}})},getViewPort:function(){var pageWidth=window.innerWidth,pageHeight=window.innerHeight;if(typeof pageWidth!="number"){if(document.compatMode=="CSS1Compat"){pageWidth=document.documentElement.clientWidth;pageHeight=document.documentElement.clientHeight}else{pageWidth=document.body.clientWidth;pageHeight=document.body.clientHeight}}return{pageWidth:pageWidth,pageHeight:pageHeight}},getDocumentHeight:function(){var docHeight=null,docWidth=null;if(document.compatMode=="CSS1Compat"){docHeight=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight);docWidth=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth)}else{docHeight=Math.max(document.body.scrollHeight,document.body.clientHeight);docWidth=Math.max(document.body.scrollWidth,document.body.clientWidth)}return{docWidth:docWidth,docHeight:docHeight}},getBoundingClientRect:function(ele){if(ele!=null){var scrollTop=document.documentElement.scrollTop;var scrollLeft=document.documentElement.scrollLeft;if(ele.getBoundingClientRect){if(typeof arguments.callee.offset!="number"){var scrollTop=document.documentElement.scrollTop;var temp=document.createElement("div");temp.style.cssText="position:absolute;left: 0;top: 0;";document.body.appendChild(temp);arguments.callee.offset=-temp.getBoundingClientRect().top-scrollTop;document.body.removeChild(temp);temp=null}var rect=ele.getBoundingClientRect();var offset=arguments.callee.offset;return{left:rect.left+offset,right:rect.right+offset,top:rect.top+offset,bottom:rect.bottom+offset}}else{var actualLeft=Base.prototype.getElementLeft(ele);var actualTop=Base.prototype.getElementTop(ele);return{left:actualLeft-scrollLeft,right:actualLeft+ele.offsetWidth-scrollLeft,top:actualTop-scrollTop,bottom:actualTop+ele.offsetHeight-scrollTop}
}}},getStyle:function(ele,name){if(ele!=null){if(ele.currentStyle){return ele.currentStyle[name]}else{var ua=navigator.userAgent;if(ua.indexOf("Firefox")==-1){return getComputedStyle(ele,null)[name]}else{var a=getComputedStyle(ele,null)[name],reg=/[A-z]/;return Math.ceil(Number(a.split(reg)[0]))+"px"}}}},loadScriptString:function(code){var script=document.createElement("script");script.type="text/javascript";try{script.appendChild(document.createTextNode(code))}catch(ex){script.text=code}document.body.appendChild(script)},loadStyleString:function(css){var Style=document.createElement("style");Style.type="text/css";try{Style.appendChild(document.createTextNode(css))}catch(ex){Style.styleSheet.cssText=css}var head=document.getElementsByTagName("head")[0];head.appendChild(Style)},getMouseWheel:function(ele){if(ele!=null){ele.onmousewheel=function(event){var event=Base.prototype.getEvent(event);if(event.wheelDelta>0||event.detail<0){ele.style.height=ele.clientHeight-10+"px";console.log(ele.style.height)}else{ele.style.height=ele.clientHeight+10+"px";console.log(ele.style.height)}event.preventDefault&&event.preventDefault()};Base.prototype.addHandler(ele,"DOMMouseScroll",ele.onmousewheel)}},browserVersion:function(){if(!("WebSocket" in window&&2===window.WebSocket.CLOSING)){var d=document.createElement("div");d.className="browsehappy";d.innerHTML='<div style="width:100%;height:50px;font-size:20px;line-height:50px;text-align:center;background-color:#E90D24;color:#fff;margin-bottom:40px;">\u7ecf\u68c0\u6d4b\u002c\u4f60\u7684\u6d4f\u89c8\u5668\u7248\u672c\u592a\u4f4e\uff01\u4e3a\u4e86\u4fdd\u8bc1\u826f\u597d\u7684\u4f53\u9a8c\u002c\u8bf7\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684\u8c37\u6b4c\u6d4f\u89c8\u5668 <a target="_blank" href="http://rj.baidu.com/soft/detail/14744.html?ald" style="background-color:#31b0d5;border-color: #269abc;text-decoration: none;padding: 6px 12px;background-image: none;border: 1px solid transparent;border-radius: 4px;color:#FFEB3B;">\u7acb\u5373\u5347\u7ea7</a></div>';
var f=function(){var s=document.getElementsByTagName("body")[0];if("undefined"==typeof(s)){setTimeout(f,10)}else{s.insertBefore(d,s.firstChild)}};f()}},getClientCoordinates:function(event){return{clientX:event.clientX,clientY:event.clientY}},getPageCoordinates:function(event){var pageX=event.pageX,pageY=event.pageY;if(pageX===undefined){pageX=event.clientX+(document.body.scrollLeft||document.documentElement.scrollLeft)}if(pageY===undefined){pageY=event.clientY+(document.body.scrollLeft||document.documentElement.scrollLeft)}return{pageX:pageX,pageY:pageY}},getScreenCoordinate:function(){var leftPos=(typeof window.screenLeft=="number")?window.screenLeft:window.screenX;var topPos=(typeof window.screenTop=="number")?window.screenTop:window.screenY;return{leftPos:leftPos,topPos:topPos}},createVariables:function(name,len,data){for(var i=1;i<=len;i++){window[name+i]=data}},getRelatedTarget:function(event){if(event.relatedTarget){return event.relatedTarget}else{if(event.toElement){return event.toElement}else{if(event.fromElement){return event.fromElement}else{return null}}}},getMouseMethod:function(event){if(document.implementation.hasFeature("MouseEvents","2.0")){return event.button}else{switch(event.button){case 0:case 1:case 3:case 5:case 7:return 0;case 2:case 6:return 2;case 4:return 1}}},getCharCode:function(event){if(typeof event.charCode=="number"){return event.charCode}else{return event.keyCode}},contextMenu:function(areaName,content){var ul=document.createElement("ul");ul.id=areaName;document.body.appendChild(ul);ul.style.cssText="position: absolute;visibility: hidden;background:silver;width: 120px;border: 1px solid #CCCCCC;box-shadow: 1px 1px 1px #ccc;margin: 0 auto;text-align: center;";ul.innerHTML=content;Base.prototype.addHandler(window,"load",function(event){Base.prototype.addHandler(document,"contextmenu",function(event){event=Base.prototype.getEvent(event);Base.prototype.preventDefault(event);var menu=Base.prototype.getDom(areaName);var a="",b="";a=event.clientX+menu.offsetWidth<Base.prototype.getViewPort().pageWidth?event.clientX:Base.prototype.getViewPort().pageWidth-menu.offsetWidth-3;
b=event.clientY+menu.offsetHeight<Base.prototype.getViewPort().pageHeight?event.clientY:Base.prototype.getViewPort().pageHeight-menu.offsetHeight-3;menu.style.left=a+"px";menu.style.top=b+"px";menu.style.visibility="visible"});Base.prototype.addHandler(document,"click",function(event){Base.prototype.getDom(areaName).style.visibility="hidden"})})},getSelectedText:function(textbox){if(typeof textbox.selectionStart=="number"){return textbox.value.substring(textbox.selectionStart,textbox.selectionEnd)}else{if(document.selection){return document.selection.createRange().text}}},selectText:function(textbox,startIndex,stopIndex){if(textbox.setSelectionRange){textbox.setSelectionRange(startIndex,stopIndex)}else{if(textbox.createTextRange){var rang=textbox.createTextRange();rang.collapse(true);rang.moveStart("character",startIndex);rang.moveEnd("character",stopIndex-startIndex);rang.select()}}},startMove:function(obj,json,fn){clearInterval(obj.timer);obj.timer=setInterval(function(){var flag=true;for(var attr in json){var icur=0;var speed=0;if(attr=="opacity"){icur=Math.round(parseFloat(Base.prototype.getStyle(obj,attr))*100)}else{icur=parseInt(Base.prototype.getStyle(obj,attr))}speed=(json[attr]-icur)/8;speed=speed>0?Math.ceil(speed):Math.floor(speed);if(json[attr]!=icur){if(attr=="opacity"){obj.style[attr]=(icur+speed)/100;obj.style.filter="alpha(opacity"+(icur+speed)+")"}else{obj.style[attr]=icur+speed+"px"}}else{clearInterval(obj.timer);if(fn){fn()}}}},0)},getClipboardText:function(event){var clipboardData=(event.clipboardData||window.clipboardData);if(typeof clipboardData===undefined){return clipboardData.getData("text")}},forBiddenPaste:function(event,bool){var ClipboardTxt=Base.prototype.getClipboardText(event);if(bool){if(!/^\d*$/.test(ClipboardTxt)){Base.prototype.preventDefault(event)}}else{if(!/^\D*$/.test(ClipboardTxt)){Base.prototype.preventDefault(event)}}},forBiddenInput:function(textbox,event,bool){var charCode=Base.prototype.getCharCode(event);if(bool){if(!/\d/.test(String.fromCharCode(charCode))&&charCode>9&&!event.ctrlKey){Base.prototype.preventDefault(event)
}}else{if(!/\D/.test(String.fromCharCode(charCode))&&charCode>9&&!event.ctrlKey){Base.prototype.preventDefault(event)}}},setClipboardText:function(event,value){if(event.clipboardData){return event.clipboardData.setData("text/plain",value)}else{if(window.clipboardData){return window.clipboardData.setData("text",value)}}},tabForward:function(event){event=Base.prototype.getEvent(event);var target=Base.prototype.getTarget(event);if(target.value.length==target.maxLength){var form=target.form;for(var i=0,len=form.elements.length;i<len;i++){if(form.elements[i]==target){if(form.elements[i+1]){form.elements[i+1].focus()}return}}}},InstanceOrProperty:function(obj,name){return !obj.hasOwnProperty(name)&&(name in obj)},getSelectedOptions:function(selectbox){var result=[];var option=null;for(var i=0,len=selectbox.options.length;i<len;i++){option=selectbox.options[i];if(option.selected){result.push(option)}}return result},serialize:function(form){var parts=[],field=null,i,len,j,optLen,option,optValue;for(i=0,len=form.elements.length;i<len;i++){field=form.elements[i];switch(field.type){case"select-one":case"select-multiple":if(field.name.length){for(j=0,optLen=field.options.length;j<optLen;j++){option=field.options[j];if(option.selected){optValue="";if(option.hasAttribute){optValue=(option.hasAttribute("value")?option.value:option.text)}else{optValue=(option.attributes["value"].specified?option.value:option.text)}parts.push(encodeURIComponent(field.name)+"="+encodeURIComponent(optValue))}}}break;case undefined:case"file":case"submit":case"reset":case"button":break;case"radio":case"checkbox":if(!field.checked){break}default:if(field.name.length){parts.push(encodeURIComponent(field.name)+"="+encodeURIComponent(field.value))}}}return parts.join("&")},clearSelectbox:function(selectbox){for(var i=0,len=selectbox.options.length;i<len;i++){selectbox.remove(0)}},moveBox:function(target,ele){ele.onmousedown=function(event){target.style.position="absolute";ele.style.cursor="move";var event=base.getEvent(event);
var oX=event.clientX-target.offsetLeft,oY=event.clientY-target.offsetTop;document.onmousemove=function(event){var event=base.getEvent(event);base.preventDefault(event);var cX=event.clientX-oX,cY=event.clientY-oY;var maxW=base.getViewPort().pageWidth-target.offsetWidth,maxH=base.getViewPort().pageHeight-target.offsetHeight;cX>maxW?cX=maxW:cX;cY>maxH?cY=maxH:cY;cY<0?cY=0:cY;cX<0?cX=0:cX;target.style.left=cX+"px";target.style.top=cY+"px"};document.onmouseup=function(){document.onmousemove=null;document.onmouseup=null};return false}},siblingNodes:function(ele){a=[];var prev=ele.previousSibling;while(prev!=null){if(prev.nodeType==1){a.unshift(prev)}prev=prev.previousSibling}var next=ele.nextSibling;while(next!=null){if(next.nodeType==1){a.push(next)}next=next.nextSibling}return a},browserName:function(){var os=navigator.platform;var userAgent=navigator.userAgent;var info="";var tempArray="";if(os.indexOf("Win")>-1){if(userAgent.indexOf("Windows NT 5.0")>-1){info+="Win2000"}else{if(userAgent.indexOf("Windows NT 5.1")>-1){info+="WinXP"}else{if(userAgent.indexOf("Windows NT 5.2")>-1){info+="Win2003"}else{if(userAgent.indexOf("Windows NT 6.0")>-1){info+="WindowsVista"}else{if(userAgent.indexOf("Windows NT 6.1")>-1||userAgent.indexOf("Windows 7")>-1){info+="Win7"}else{if(userAgent.indexOf("Windows NT 6.2")>-1||userAgent.indexOf("Windows 8")>-1){info+="Win8"}else{if(userAgent.indexOf("Windows NT 6.3")>-1||userAgent.indexOf("Windows 8.1")>-1){info+="Win8.1"}else{if(userAgent.indexOf("Windows NT 10.0")>-1||userAgent.indexOf("Windows 10")>-1){info+="Win10"}else{info+="Other"}}}}}}}}}else{if(os.indexOf("Mac")>-1){info+="Mac"}else{if(os.indexOf("X11")>-1){info+="Unix"}else{if(os.indexOf("Linux")>-1){info+="Linux"}else{info+="Other"}}}}info+="/";var isOpera=userAgent.indexOf("Opera")>-1;var isIE=userAgent.indexOf("compatible")>-1&&userAgent.indexOf("MSIE")>-1&&!isOpera;var isEdge=userAgent.toLowerCase().indexOf("edge")>-1&&!isIE;var isIE11=(userAgent.toLowerCase().indexOf("trident")>-1&&userAgent.indexOf("rv")>-1);
if(/[Ff]irefox(\/\d+\.\d+)/.test(userAgent)){tempArray=/([Ff]irefox)\/(\d+\.\d+)/.exec(userAgent);info+=tempArray[1]+tempArray[2]}else{if(isIE){var version="";var reIE=new RegExp("MSIE (\\d+\\.\\d+);");reIE.test(userAgent);var fIEVersion=parseFloat(RegExp["$1"]);if(fIEVersion==7){version="IE7"}else{if(fIEVersion==8){version="IE8"}else{if(fIEVersion==9){version="IE9"}else{if(fIEVersion==10){version="IE10"}else{version="0"}}}}info+=version}else{if(isEdge){info+="Edge"}else{if(isIE11){info+="IE11"}else{if(/[Cc]hrome\/\d+/.test(userAgent)){tempArray=/([Cc]hrome)\/(\d+)/.exec(userAgent);info+=tempArray[1]+tempArray[2]}else{if(/[Vv]ersion\/\d+\.\d+\.\d+(\.\d)* *[Ss]afari/.test(userAgent)){tempArray=/[Vv]ersion\/(\d+\.\d+\.\d+)(\.\d)* *([Ss]afari)/.exec(userAgent);info+=tempArray[3]+tempArray[1]}else{if(/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(userAgent)){tempArray=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(userAgent);info+=tempArray[1]+tempArray[2]}else{info+="unknown"}}}}}}}return info},formatTime:function(value){var seconds=parseInt(value),minutes=0,hours=0,result;hours=parseInt(value/3600);hours=hours>9?hours:"0"+hours;minutes=parseInt(value/60)-hours*60;minutes=minutes>9?minutes:"0"+minutes;seconds=value%60;seconds=seconds>9?seconds:"0"+seconds;result=hours+":"+minutes+":"+seconds;return result},jsonp:function(url){var script=document.createElement("script");script.src=url;document.body.insertBefore(script,document.body.lastChild)},urlArgs:function(){var args={},query=location.search.substring(1),pairs=query.split("&");for(var i=0;i<pairs.length;i++){var pos=pairs[i].indexOf("=");if(pos==-1){continue}var name=pairs[i].substring(0,pos),value=pairs[i].substring(pos+1),value=decodeURIComponent(value);args[name]=value}return args}};window.Base=Base})(window,document);
